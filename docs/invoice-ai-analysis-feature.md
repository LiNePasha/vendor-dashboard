# ููุฒุฉ ุฑูุน ูุชุญููู ุงูููุงุชูุฑ ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ููุฒุฉ ุชุณูุญ ุจุฑูุน ุตูุฑุฉ ูุงุชูุฑุฉ (ูู ุงูููุฑุฏูู ูุซูุงู) ูุชุญููููุง ุชููุงุฆูุงู ุจุงุณุชุฎุฏุงู ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูุงุณุชุฎุฑุงุฌ ุจูุงูุงุช ุงูููุชุฌุงุช (ุงูุฃุณูุงุกุ ุงููููุงุชุ ุงูุฃุณุนุงุฑุ SKU) ุซู ุงุณุชูุฑุงุฏูุง ุจุดูู ุฌูุงุนู ุฅูู ุงููุธุงู.

## ๐ฏ ุงููุฏู

ุชุณุฑูุน ุนูููุฉ ุฅุฏุฎุงู ุงูููุชุฌุงุช ูู ููุงุชูุฑ ุงูููุฑุฏูู ุนู ุทุฑูู:
- โ ุฑูุน ุตูุฑุฉ ุงููุงุชูุฑุฉ
- ๐ค ุชุญููู ุชููุงุฆู ุจุงูู AI (Groq Vision)
- ๐ ุนุฑุถ ุงููุชุงุฆุฌ ูู ุฌุฏูู ูุงุจู ููุชุนุฏูู
- โก ุงุณุชูุฑุงุฏ ุฌูุงุนู ุจุถุบุทุฉ ูุงุญุฏุฉ

## ๐๏ธ ุงูููููุงุช

### 1. API Endpoint: `/api/analyze-invoice`

**ุงูููู:** `app/api/analyze-invoice/route.js`

**ุงููุธููุฉ:** 
- ุงุณุชูุจุงู ุฑุงุจุท ุตูุฑุฉ ุงููุงุชูุฑุฉ
- ุฅุฑุณุงููุง ุฅูู Groq Vision API (ูููุฐุฌ `meta-llama/llama-4-scout-17b-16e-instruct`)
- ุงุณุชุฎุฑุงุฌ ุจูุงูุงุช ููุธูุฉ (JSON) ููููุชุฌุงุช

**ุงููุฏุฎูุงุช:**
```json
{
  "imageUrl": "https://example.com/invoice.jpg"
}
```

**ุงููุฎุฑุฌุงุช:**
```json
{
  "success": true,
  "products": [
    {
      "name": "ุงุณู ุงูููุชุฌ",
      "sku": "ABC123",
      "quantity": 10,
      "price": 50.00
    }
  ],
  "rawResponse": "ุงุณุชุฌุงุจุฉ ุงูู AI ุงูุฃูููุฉ"
}
```

**ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ:**
- โ Groq SDK (`groq-sdk`)
- โ Vision Model: `meta-llama/llama-4-scout-17b-16e-instruct` (Llama 4 Scout)
- โ Temperature: 0.1 (ููุญุตูู ุนูู ูุชุงุฆุฌ ูุชุณูุฉ)
- โ ูุนุงูุฌุฉ ุฃุฎุทุงุก ูุชูุฏูุฉ

**Prompt Engineering:**
```
ุฃูุช ุฎุจูุฑ ูู ุชุญููู ุงูููุงุชูุฑ. ูู ุจุชุญููู ูุฐู ุงููุงุชูุฑุฉ ูุงุณุชุฎุฑุฌ ุฌููุน ุงูููุชุฌุงุช.

ุชุนูููุงุช:
1. ุงุณุชุฎุฑุฌ ูู ููุชุฌ ุจุดูู ูููุตู
2. ุงุญุชูุธ ุจุงููุบุฉ ุงูุฃุตููุฉ (ุนุฑุจู/ุฅูุฌููุฒู)
3. ุงุจุญุซ ุนู: ุงุณู ุงูููุชุฌุ ุงููููุฉุ ุงูุณุนุฑุ SKU
4. ุฅุฐุง ูู ุชุฌุฏ ูุนูููุฉุ ุถุน null
5. ุฃุฎุฑุฌ JSON ููุท ุจุฏูู ูุต ุฅุถุงูู
```

### 2. Modal Component: `InvoiceUploadModal.js`

**ุงูููู:** `components/InvoiceUploadModal.js`

**ุงููุธููุฉ:**
ูุงุฌูุฉ ูุงููุฉ ูุฑูุน ุงููุงุชูุฑุฉ ูุนุฑุถ ุงููุชุงุฆุฌ

**ุงูุฎุทูุงุช (Steps):**

#### Step 1: Upload
- ููุทูุฉ ุฑูุน ุงูุตูุฑุฉ (Drag & Drop style)
- ูุนุงููุฉ ุงูุตูุฑุฉ
- ุงูุชุญูู ูู ููุน ุงูููู (images only)
- ุงูุชุญูู ูู ุงูุญุฌู (max 10MB)
- ูุตุงุฆุญ ูุฃูุถู ูุชุงุฆุฌ

#### Step 2: Analyzing
- ุดุงุดุฉ ุงูุชุธุงุฑ ูุน ุฑุณูู ูุชุญุฑูุฉ
- "ุฌุงุฑู ุชุญููู ุงููุงุชูุฑุฉ ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู..."

#### Step 3: Results
- ุฌุฏูู ุชูุงุนูู ูุนุฑุถ ุงูููุชุฌุงุช ุงููุณุชุฎุฑุฌุฉ
- **ุงูุฃุนูุฏุฉ:**
  - # (ุงูุฑูู ุงูุชุณูุณูู)
  - ุงุณู ุงูููุชุฌ (ูุงุจู ููุชุนุฏูู)
  - SKU (ูุงุจู ููุชุนุฏููุ ุงุฎุชูุงุฑู)
  - ุงููููุฉ (ูุงุจู ููุชุนุฏูู)
  - ุงูุณุนุฑ (ูุงุจู ููุชุนุฏูู)
  - ุฅุฌุฑุงุก (ุฒุฑ ุญุฐู ๐๏ธ)

- **ููุฒุงุช ุฅุถุงููุฉ:**
  - ูุนุงููุฉ ุตุบูุฑุฉ ูููุงุชูุฑุฉ ูู ุงูุฃุนูู
  - ุฒุฑ "ุฑูุน ูุงุชูุฑุฉ ุฃุฎุฑู"
  - ุนุฑุถ ุงุณุชุฌุงุจุฉ ุงูู AI ุงูุฃูููุฉ (collapsible ูููุทูุฑูู)
  - ุฒุฑ "ุงุณุชูุฑุงุฏ X ููุชุฌ"

**States:**
```javascript
- step: 'upload' | 'analyzing' | 'results'
- selectedFile: File object
- previewUrl: Base64 preview
- uploadedImageUrl: Cloudinary URL
- products: Array of extracted products
- uploading: boolean
- analyzing: boolean
- importing: boolean
```

### 3. UI Integration ูู ุตูุญุฉ ุงูููุชุฌุงุช

**ุงูููู:** `app/products/page.js`

**ุงูุชุนุฏููุงุช:**
1. โ Import ููู `InvoiceUploadModal`
2. โ State: `showInvoiceUpload`
3. โ ุฒุฑ ุฌุฏูุฏ ูู ุงูู Header:

```jsx
<button onClick={() => setShowInvoiceUpload(true)}>
  ๐ธ ุฑูุน ูุงุชูุฑุฉ
</button>
```

4. โ Modal component ูุน callbacks:
```jsx
<InvoiceUploadModal
  isOpen={showInvoiceUpload}
  onClose={() => setShowInvoiceUpload(false)}
  onSuccess={(products) => {
    setToast({ message: 'ุชู ุงุณุชูุฑุงุฏ X ููุชุฌ', type: 'success' });
    fetchProducts(..., true); // Force refresh
  }}
  setToast={setToast}
/>
```

## ๐ ูุชุทูุจุงุช ุงูุจูุฆุฉ

**.env.local:**
```bash
GROQ_API_KEY=gsk_xxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

## ๐ฆ ุงูุชุจุนูุงุช (Dependencies)

```bash
npm install groq-sdk
```

**ุฅุตุฏุงุฑุงุช ูุซุจุชุฉ:**
- `groq-sdk@^0.8.0` (ุฃู ุฃุญุฏุซ)

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### ูููุณุชุฎุฏู ุงูููุงุฆู:

1. **ุงูุชุญ ุตูุญุฉ ุงูููุชุฌุงุช** (`/products`)
2. **ุงุถุบุท ุนูู ุฒุฑ "๐ธ ุฑูุน ูุงุชูุฑุฉ"**
3. **ุงุฎุชุฑ ุตูุฑุฉ ุงููุงุชูุฑุฉ** ูู ุฌูุงุฒู
4. **ุงูุชุธุฑ ุงูุชุญููู** (5-15 ุซุงููุฉ)
5. **ุฑุงุฌุน ุงููุชุงุฆุฌ:**
   - ุนุฏูู ุฃู ุจูุงูุงุช ุฎุงุทุฆุฉ
   - ุงุญุฐู ุฃู ููุชุฌุงุช ุบูุฑ ูุทููุจุฉ
6. **ุงุถุบุท "ุงุณุชูุฑุงุฏ X ููุชุฌ"**
7. โ **ุชู!** ุงูููุชุฌุงุช ุฃุถููุช ูููุธุงู

### ูููุทูุฑ:

```javascript
// ุงุณุชุฏุนุงุก API ูุจุงุดุฑ
const response = await fetch('/api/analyze-invoice', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ 
    imageUrl: 'https://cloudinary.com/image.jpg' 
  })
});

const data = await response.json();
// { success: true, products: [...] }
```

## ๐งช ุงุฎุชุจุงุฑ ุงูููุฒุฉ

### ุณููุงุฑูููุงุช ุงูุงุฎุชุจุงุฑ:

1. **โ ูุงุชูุฑุฉ ูุงุถุญุฉ (ุนุฑุจู)**
   - ุตูุฑุฉ ูุงุถุญุฉ ููุงุชูุฑุฉ ููุฑุฏ ูุตุฑู
   - ุฃุนูุฏุฉ: ุงุณู ุงูุตููุ ุงููููุฉุ ุงูุณุนุฑ
   - ุงููุชูุฌุฉ ุงููุชููุนุฉ: ุงุณุชุฎุฑุงุฌ ุฏููู 90%+

2. **โ ูุงุชูุฑุฉ ุจุงูุฅูุฌููุฒูุฉ**
   - Part name, Quantity, Price
   - ุงููุชูุฌุฉ ุงููุชููุนุฉ: ุงุณุชุฎุฑุงุฌ ุฏููู 90%+

3. **โ๏ธ ูุงุชูุฑุฉ ุบูุฑ ูุงุถุญุฉ**
   - ุตูุฑุฉ ูุธููุฉ ุฃู ูุงุฆูุฉ
   - ุงููุชูุฌุฉ ุงููุชููุนุฉ: ุงุณุชุฎุฑุงุฌ ุฌุฒุฆู ุฃู ุฎุทุฃ

4. **โ๏ธ ููู ุบูุฑ ุตูุฑุฉ**
   - ูุญุงููุฉ ุฑูุน PDF ุฃู Word
   - ุงููุชูุฌุฉ ุงููุชููุนุฉ: ุฑูุถ ุงูููู

5. **โ๏ธ ุตูุฑุฉ ูุจูุฑุฉ ุฌุฏุงู**
   - ุฃูุซุฑ ูู 10MB
   - ุงููุชูุฌุฉ ุงููุชููุนุฉ: ุฑูุถ ุงูููู

## ๐ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

### ุฃุฎุทุงุก ูุญุชููุฉ:

| ุงูุฎุทุฃ | ุงูุณุจุจ | ุงูุญู |
|------|-------|-----|
| `ููุชุงุญ API ุบูุฑ ููุฌูุฏ` | GROQ_API_KEY ููููุฏ | ุฃุถู ุงูููุชุงุญ ูู `.env.local` |
| `ูุดู ุชุญููู ุงููุงุชูุฑุฉ` | ุตูุฑุฉ ุบูุฑ ูุงุถุญุฉ | ุฃุนุฏ ุงูุชูุงุท ุงูุตูุฑุฉ ุจุฌูุฏุฉ ุฃูุถู |
| `ูุดู ุฑูุน ุงูุตูุฑุฉ` | ูุดููุฉ ูู Cloudinary | ุชุญูู ูู ุฅุนุฏุงุฏุงุช Cloudinary |
| `ูู ูุชู ุงูุนุซูุฑ ุนูู ููุชุฌุงุช` | ุงููุงุชูุฑุฉ ูุง ุชุญุชูู ููุชุฌุงุช | ุชุฃูุฏ ูู ูุถูุญ ุงูุฌุฏูู ูู ุงูุตูุฑุฉ |
| `ูุดู ุงุณุชูุฑุงุฏ ุงูููุชุฌุงุช` | ุฎุทุฃ ูู API ุงูููุชุฌุงุช | ุชุญูู ูู WooCommerce API |

### Logging:

```javascript
console.log('๐ Analyzing invoice image:', imageUrl);
console.log('๐ Groq Response:', responseText);
console.log(`โ Extracted ${products.length} products`);
console.error('โ Invoice analysis error:', error);
```

## ๐จ ุงูุชุตููู (UI/UX)

### ุงูุฃููุงู:
- **ุฒุฑ ุฑูุน ุงููุงุชูุฑุฉ:** `from-purple-600 to-indigo-700`
- **ุฒุฑ ุงูุงุณุชูุฑุงุฏ:** `from-green-600 to-emerald-700`
- **Loading states:** Animated spinners
- **Toast notifications:** Green (success), Red (error)

### ุงูุฑุณูู ุงููุชุญุฑูุฉ:
- โ Fade in ููู modal backdrop
- โ Scale in ููู modal content
- โ Bounce animation ููู loading dots
- โ Smooth transitions

## ๐ ุงูุฃุฏุงุก

- **Groq API Response Time:** 5-15 ุซุงููุฉ (ุญุณุจ ุญุฌู ุงูุตูุฑุฉ)
- **Image Upload Time:** 2-5 ุซูุงู (Cloudinary)
- **Total Time:** ~7-20 ุซุงููุฉ ูู ุงูุฑูุน ูููุชุงุฆุฌ

## ๐ ุงูุชุทููุฑ ุงููุณุชูุจูู

### ููุฒุงุช ููุชุฑุญุฉ:

1. **๐ ุฏุนู PDF:**
   - ุฑูุน PDF ูุชุญูููู ูุตูุฑ
   - ุชุญููู ุตูุญุงุช ูุชุนุฏุฏุฉ

2. **๐ธ ุงูุชูุงุท ูุจุงุดุฑ:**
   - ูุชุญ ุงููุงููุฑุง ูู ุงููุชุตูุญ
   - ุงูุชูุงุท ุงููุงุชูุฑุฉ ูุจุงุดุฑุฉ

3. **๐๏ธ ุฑุจุท ุจุงููุฎุฒู:**
   - ุงุณุชูุฑุงุฏ ูุจุงุดุฑ ููุธุงู ุงููุฎุฒู
   - ุชุญุฏูุซ ุงููุฎุฒูู ุชููุงุฆูุงู

4. **๐ ุชุญููู ุฅุญุตุงุฆู:**
   - ุชุชุจุน ุฏูุฉ ุงูุงุณุชุฎุฑุงุฌ
   - ุชูุงุฑูุฑ ุนู ุฃุฎุทุงุก ุงูู AI

5. **๐ ูุบุงุช ุฅุถุงููุฉ:**
   - ุชุญุณูู ุงูุฏุนู ููุบุฉ ุงูุฅูุฌููุฒูุฉ
   - ุฏุนู ูุบุงุช ุฃุฎุฑู

6. **๐พ ุญูุธ ุณุฌู ุงูููุงุชูุฑ:**
   - ูุงุนุฏุฉ ุจูุงูุงุช ููููุงุชูุฑ ุงููุฑููุนุฉ
   - ุฅููุงููุฉ ุงูุจุญุซ ูู ุงูุณุฌู

## ๐ Groq API Documentation

**Model:** `meta-llama/llama-4-scout-17b-16e-instruct`

**Capabilities:**
- โ OCR (Optical Character Recognition)
- โ Multimodal (Vision + Text)
- โ Table extraction
- โ Multilingual support (Arabic + English)
- โ Structured JSON output
- โ 8K context window
- โ 750 tokens/second speed

**Pricing:** (ุชุญูู ูู Groq Pricing Page)
- Free tier: 10 requests/minute
- Rate limits: ุชุทุจู ุญุณุจ ุงูุฎุทุฉ

**Best Practices:**
1. **Low Temperature (0.1):** ููุญุตูู ุนูู ูุชุงุฆุฌ ุซุงุจุชุฉ
2. **Clear Prompts:** ุชุนูููุงุช ูุงุถุญุฉ ุจุงูุนุฑุจูุฉ ุฃู ุงูุฅูุฌููุฒูุฉ
3. **JSON Format:** ุทูุจ ุตุฑูุญ ูู JSON output
4. **Error Handling:** ูุนุงูุฌุฉ markdown code blocks

## ๐ค ุงููุณุงููุฉ

ุนูุฏ ุชุทููุฑ ูุฐู ุงูููุฒุฉ ุฃู ุฅุถุงูุฉ ุชุญุณููุงุช:
1. ุงุฎุชุจุฑ ูุน ููุงุชูุฑ ุญููููุฉ ูุชููุนุฉ
2. ุนุงูุฌ ุญุงูุงุช ุงููุดู ุจุดูู ุฌูุฏ
3. ุฃุถู logging ูุงูู ููู debugging
4. ุญุฏูุซ ูุฐุง ุงูููู ุจุฃู ุชุบููุฑุงุช

---

**ุชุงุฑูุฎ ุงูุฅูุดุงุก:** ููุงูุฑ 2026  
**ุงูุฅุตุฏุงุฑ:** 1.0.0  
**ุงูุญุงูุฉ:** โ ุฌุงูุฒ ููุงุณุชุฎุฏุงู
